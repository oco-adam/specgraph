# Dloop V2 - initial idea


Please read @spec-rules.md and @dloop-v1.md . In the spec format described by the above docs, I think that, whilst it has its virtuous, trying to only allow behaviour-only specs is too restrictive. If our top level goal is to have a declarative spec from which we and automatically and predictably manifest our intended system by a team of agents. By manifestation here I mean the process of going from spec to system and it may involve, designing, planning, coding, building and deploying. If we only allow purely behavioural specs, then this means that there always needs to be comprehensive, supporting docs that describe things like:  - The design system - The tech stack - Any other technical insights or guidance that are beyond the current intelligence of the model - Any additional business domain insights Usually we provide tech stack via a mishmash of documents, agent instructions and existing patterns in the codebase, but it would be extremely desirable to include a full description of this in the spec. Similarly with the design system, this is usually a similar story. For technical insights/guidance, it is normal to add conditions to a PRD that might specify “How” to do something rather than just what to do (the declarative way). This could be necessary for a number of reasons eg if there is a specific way to use a piece of technology in order to keep costs down. Often a more senior engineer (whether it be human or agentic ai), might guide the implementor agent towards a (better) solution during an implementation. This is usually done in an imperative fashion and importantly in a way that breaks our chances of being able to predictably re-manifest our intended system from our declarative spec. If we capture this guidance as additional specs (eg as ‘technical specs’ to complement/guide the purely behavioural specs) then we can keep our goal of predictable/deterministic re-manifestation of our system.  For example if we were developing the spec for an application that uses ai agents to perform tasks, then a senior engineer might guide the solution by specifying that there should be an abstract agent ‘provider’ interface so that we may have a uniform interface for using different agents across different providers and that there should be included a ‘deterministic provider’ that is used for deterministic testing of the frameworks/state machines surrounding complex agentic workflows.  This guidance could be broken down into a set of ‘technical guidance’ specs that are clearly not purely behavioural but can be used to strengthen the spec so that it manifests more predicatably into more robust applications. I would like to work on a new version where we have a "total/hyper/“ spec, which specifies not only all behaviour of the system, but everything required in order to 'manifest' the intended system that its 'designer' wanted.  This is a big jump and an ambitious goal, but I feel it is achievable to describe such a spec if we are careful.  The way I imagine this is that rather than having a ‘flat’ spec.json we have a much more ‘multi-dimensional’ ‘spec graph’. We will basically have this rich graph that completely describes everything that you need to know about the system. We are aiming for the following:  The graph should be the minimal (i.e. ‘smallest’) such thing that can accurately manifest the designer’s intended system in a predicable manner.  The graph is ‘complete’ in the sense that it either includes the description of the implementing agent (or this implementing agent is implicit in the term ‘complete’) and when implemented/manifested by the agent, it will always give the ‘same’ result or ‘logically equivalent’ results. Can you please come up with a new markdown document describing a new framework for describing these ‘complete specs’.
